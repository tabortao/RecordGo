# 小成长 (Little Growth) APP 产品需求文档 (PRD)

| 文档版本 | V1.0 |
| :--- | :--- |
| **产品名称** | 小成长 (Little Growth) |
| **产品定位** | 极简、高颜值的儿童成长记录工具 |
| **核心标语** | 记录生活与学习的点点滴滴 |

---

## 1. UI/UX 设计规范 (Design Specs)

本产品的核心竞争力在于其**Dribbble美学**的高保真视觉体验。

### 1.1 整体风格 (Look & Feel)
*   **设计理念**：干净、极简、现代、扁平化但带细微层次。
*   **色调**：
    *   **背景色**：极浅灰色 (e.g., `#F5F7FA`)，营造呼吸感。
    *   **主色调**：柔和马卡龙色系。
    *   **辅助色**：淡紫色 (Lavender)、柔和蓝 (Baby Blue)、奶白色 (Creamy White)。
*   **视觉特征**：
    *   **圆角**：所有卡片、按钮、图片均采用大圆角 (Radius 12px - 16px)。
    *   **投影**：使用弥散阴影 (Diffuse Shadows)，避免生硬的黑色投影，营造“悬浮”感。
    *   **图标**：线性或扁平矢量风格，线条圆润。

### 1.2 首页卡片设计 (The Card)
这是App最核心的视觉组件，需严格执行以下布局：
*   **容器**：纯白 (`#FFFFFF`) 悬浮卡片，带有轻微的Y轴偏移投影。
*   **头部 (Header)**：
    *   **左侧**：**日期徽章**。设计为淡紫色背景 (`#E6E6FA` 变体) + 深紫色文字，圆角矩形，显示如 "2023 OCT 24"。
    *   **右侧**：卡片菜单，点击可以置顶卡片、编辑卡片、删除卡片。
*   **内容区 (Body)**：
    *   **文本**：正文内容，字体主要为深灰色 (`#333333`)，行间距舒适 (1.5倍)。
    *   **相册 (Gallery)**：
        * 压缩转换为webp格式，图片大小最小，可看清即可，使用image-conversion库压缩。
        *   位于文本下方。
        *   **布局逻辑**：
            *   1张图：大圆角矩形，最大宽度100%。
            *   2/4张图：2列网格。
            *   3/5-9张图：3列网格（九宫格样式）。
        *   **样式**：每张图片均为圆角正方形，图片间距 (Gutter) 约为 4px-8px。
*   **底部 (Footer)**：
    *   **标签区**：位于照片下方。
    *   **样式**：胶囊状 (Capsule)，背景色为柔和的渐变淡紫或淡蓝，文字为同色系深色。

---

## 2. 功能模块详解 (Functional Requirements)

### 2.1 小成长时间轴 (Little Growth Timeline)
*   **展示逻辑**：
    *   按记录发生的**时间倒序**排列（最新的在最上面）。
    *   支持无限滚动加载。
*   **侧边栏入口**：左上角“汉堡菜单”图标，点击侧滑展开侧边栏。
*   **新增入口**：右下角悬浮按钮 (FAB)，采用马卡龙主色调，点击进入“创建记录”页面。
*   **筛选状态**：当用户在侧边栏选择了标签时，首页顶部需显示“正在筛选：[标签名]”的状态栏，并提供“清除筛选”按钮。

### 2.2 侧边栏 & 标签管理 (Sidebar & Tag System)
*   **交互**：从屏幕左侧滑出，或点击左上角图标展开。
*   **结构**：
    *   **头部**：用户头像，昵称，总记录数。
    *   **列表**：树状结构展示标签。
        *   **一级标签**：粗体显示，左侧有展开/收起箭头，显示该标签卡片数量。
        *   **二级标签**：缩进显示，点击即可筛选首页内容，显示该标签卡片数量。
    *   **底部操作区**：提供“管理标签”入口。
*   **标签管理功能**：
    *   **增**：支持添加一级和二级标签。
    *   **删**：删除标签（若删除一级标签，需提示用户其下的二级标签处理方式，如级联删除或移动至根目录）。
    *   **改**：重命名标签、拖拽改变排序或层级（可选高级功能）。

### 2.3 创建/编辑记录 (Create/Edit Record)
这是一个独立的页面。

*   **日期选择**：默认当前时间，点击可修改日期（对应卡片上的日期徽章）。
*   **内容输入 (核心交互)**：
    *   多行文本输入框。
    *   **智能标签识别**：
        *   当用户输入 `#` 字符时，弹出一个悬浮列表，展示最近使用的10个标签。
        *   **逻辑**：
            *   若用户选择现有标签 -> 自动补全并关联ID。
            *   若用户继续输入新词并加空格 -> 自动创建新标签（默认为一级标签），输入`#标签\子标签`，自动创建二级标签。
            *   输入框内的标签需高亮显示（如变色或加底纹）。
*   **媒体上传**：
    *   选择照片（支持多选，上限9张）。
    *   上传后显示九宫格预览，支持拖拽排序，支持单张删除。
    *   可以选择音频文件，或点击录制音频文件，作为记录的附件。
*   **手动标签选择器**：
    *   除了输入 `#`，页面底部应提供“添加标签”按钮，弹出标签树供勾选。
*   **保存**：点击右上角“发布/保存”。

### 2.4 记录卡片操作 (Card Actions)
*   **修改**：进入编辑页面，回显所有数据（图片、文字、标签）。
*   **删除**：弹出二次确认框，确认后从数据库移除。
*   **图片预览**：在首页点击卡片内的图片，进入全屏图片浏览模式（Lightbox），支持左右滑动查看。

---

## 3. 交互与逻辑细节 (Logic Rules)

### 3.1 标签逻辑
*   **多标签支持**：一个记录卡片可以属于多个不同的标签（例如既属于“学习”，也属于“钢琴课”）。
*   **标签层级**：
    *   一级标签示例：生活、学习、旅行。
    *   二级标签示例：生活->生日；学习->英语；旅行->海边。
*   **筛选逻辑**：
    *   点击一级标签：展示该标签下**所有**子标签关联的记录（并集）。
    *   点击二级标签：仅展示关联该特定子标签的记录。

### 3.2 图片网格自适应规则 (CSS Grid Logic)
为了达到高保真UI效果，前端需按照以下逻辑渲染图片容器：
*   `Count = 1`: `width: 100%`, `aspect-ratio: 16/9` or `4/3` (圆角大图).
*   `Count = 2`: `grid-template-columns: 1fr 1fr` (两张并排).
*   `Count = 4`: `2x2` grid.
*   `Count = 3, 5, 6, 7, 8, 9`: `grid-template-columns: 1fr 1fr 1fr` (三列布局).
    *   注：当图片数量为 5, 7, 8 时，最后一行可能会留空，需保持对齐或通过算法让第一张图变大（如Pinterest布局），但在本需求中，为了保持整洁，建议统一强制九宫格对齐，缺位留白即可。

---

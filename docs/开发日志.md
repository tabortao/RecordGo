## 技巧总结

- 前端启动：cd f:\Code\RecordGo\frontend ; pnpm dev
- 太好啦，我使用 netlify 部署了前端，使用自己服务器 docker 部署了后端，成功跑起来啦！
- 回退到某个版本：`git reset --hard f3a86385a1c057bde0b4ca34a7dbc0c194095497 `。
- 使用 `git push -f origin af8dd56cb8d2e1460659e1892ad41a3617d4092c:main` 或`git push -f origin`命令将本地回退后的代码强制推送到远程仓库。
- 使用 Python 的`secret`模块生成一个随机的 SECRET_KEY，用于 Flask 应用的加密,`python -c "import secrets; print(secrets.token_hex(16))" `。
- 在`frontend\src\config\app-info.json`文件中设置软件版本信息。
- 后端内置内置 CORS 支持：`backend\internal\config\config.go`文件中设置数据库路径、存储根目录、端口、GIN 模式、是否同步父账号金币,26 行配置了跨域，允许 `https://recordgo.netlify.app` 域名访问，同时在`docker-compose.yml`中设置了`ALLOW_ORIGINS`。
- 后端修改时，GitHub 发布 release，触发 GitHub Action 自动构建 Docker 镜像，后端服务需要更新。
- 仅前端修改时，推送到 GitHub，然后在 Netlify 项目页面（`https://app.netlify.com/projects/recordgo/overview`）重新构建，即可更新前端。
- 测试账户：账号 1 为父账号，账号 2 为账号 1 的子账号；账号 3 为账号 1 的子账号；账号 4 为账号 3 的子账号。
  - 账号 1：`testuser`
  - 密码 1：`Testuser123`
  - 账号 2：Token
  - 账号 3：`testuser2`
  - 密码 3：`Testuser123`
  - 账号 4：Token
- 后端启动中不加入 S3 相关配置，上传图片存储到本地，如果配置了 S3 相关环境变量，会优先使用 S3 存储。
- AI模型配置：Chat模型推荐硅基流动deepseek-ai/DeepSeek-V3.2、Vision模型推荐硅基流动的Qwen/Qwen3-VL-8B-Instruct。
- 设置GOPROXY环境变量：使用国内的代理地址可以有效提高下载速度。可以在终端中执行以下命令：`go env -w GOPROXY="https://goproxy.cn,direct"` 

  S3 存储后端启动：

```powershell
cd g:\Code\RecordGo\backend

$env:SECRET_KEY = 'dev-secret'
$env:DB_PATH = 'storage/database/recordgo.db'
$env:STORAGE_ROOT = 'storage'
$env:PORT = '8080'
$env:GIN_MODE = 'debug'
$env:ALLOW_ORIGINS = 'http://localhost:5173'
$env:JWT_EXPIRE_DAYS = '365'

# MinIO S3（path-style）
$env:STORAGE_DRIVER = 's3'
$env:S3_PROVIDER = 'minio'
$env:S3_ENDPOINT = 'https://img.sdgarden.top'   # 你的 MinIO S3 API 域名
$env:S3_REGION = 'cn-east-1'
$env:S3_BUCKET = 'blog'
$env:S3_ACCESS_KEY_ID = 'XXX'
$env:S3_SECRET_ACCESS_KEY = 'XXX'
$env:S3_FORCE_PATH_STYLE = 'true'

# 展示域名与对象键前缀
$env:S3_PUBLIC_BASE_URL = 'https://img.sdgarden.top'   # 公共读域名（同 MinIO 域名）
$env:S3_KEY_PREFIX = ''                                # 桶名已是 blog，不要再加 blog 前缀

# 其他
$env:S3_PRESIGN_EXPIRE = '300'
$env:MAX_UPLOAD_SIZE_MB = '10'
$env:ALLOW_MIME = 'image/webp,audio/mpeg,audio/wav'

go run ./cmd/server
```

## TODO
- AI自动识别任务，还是不准确，需要结合规则，来进行调整识别的准确性，不能单独考AI模型的识别能力。

##  20260110 开发日志
- 作业家-小成长，创建新纪录，排序不对，比如我现在创建的记录A日期是2026年1月10日，之前创建的B日期是2025年12月3日。A应该显示在B的上方，现在却显示在B的下方，需要修复。
- 我 设置了$env:S3_KEY_PREFIX = 'recordgo'，但是在作业家-小成长，创建新纪录，添加的图片，却没有上传到S3_KEY_PREFIX对于的文件夹中，请修复。
##  20251231 开发日志
### 古诗词
在作业家-语文应用中新增"古诗词"功能模块，具体实现要求如下：

1. 界面元素：
   - 在语文主界面显眼位置添加"古诗词"按钮
   - 按钮样式需符合现有UI设计规范
   - 确保按钮在深色模式下有良好的可视性

2. 功能实现：
   - 点击按钮后跳转至"古诗词"专题页面
   - 页面布局和功能实现需严格遵循中的产品需求文档要求
   - 古诗数据源使用文件
   - AI功能使用我的页面中的AI、TTS使用我的页面的TTS


3. 数据处理：
   - 将chinese_poems.json文件从原位置复制到更合理的目录
   - 新位置建议：frontend/src/features/chinese-poetry/data/
   - 更新所有相关引用路径

4. 样式要求：
   - 实现完整的深色模式适配
   - 文字颜色、背景色需根据系统主题自动切换
   - 确保在两种模式下都有良好的阅读体验

5. 测试要求：
   - 验证按钮点击功能正常
   - 检查数据加载是否正确
   - 测试深色/浅色模式切换效果
   - 进行跨设备响应式测试

##  20251230 开发日志
- 在我的-设置中，增加按钮“OCR服务”，点击进入COR服务页面，根据"docs\PRD\PRD-20251230新增OCR模型.md" ，在页面中需要可以设置PP-OCRv5、PaddleOCR-VL、PP-StructureV3 及对应的API_URL和TOKEN，页面大小和“任务设置”页面一致，适配深色主题。
- 当用户设置了OCR服务TOKEN后，任务-创建任务-AI智能创建，上册图片识别优先使用OCR进行识别，然后再使用AI兑换模型智能创建任务。未设置时OCR服务TOKEN时，还是使用AI视觉模型识别。如果AI视觉模型没有设置，提醒用户需要设置AI视觉模型或设置OCR服务的API_URL和TOKE。
-
任务-创建任务页面，现有创建任务页面，为默认的TAB，然后新增一个TAB“AI智能创建”，输入学习计划或上传图片（调用AI视觉模型），AI自动识别创建任务，识别后，用户点击创建计划，即可完成任务创建。如用户有多个任务需求，一次可创建多个任务，AI需要自动识别任务标题、任务描述、任务分类、计划时长、任务金币、重复类型、开始日期、截止日期。
- docs\PRD\PRD-20251230-AI模型配置.md，支持AI连接测试与视觉模型配置。
- docs\PRD\PRD-20251230自定义TTS.md，实现自定义TTS功能模块，支持接入用户指定的TTS服务接口。

##  20251229 开发日志

- docs\PRD\PRD-20251229课表.md
- - 课表页面，背景显示一些可爱的图标、需要蒙版遮蔽，可以在“课表设置”中，设置多个emoji图标，作为课表页面的背景图，需随机不重叠显示在页面不同位置。
- 课表设置中，新增自定义背景图功能，用户可以自定义上传课表背景图，背景图需要有一个蒙版遮挡，设置背景图后，课表页面需要可以展示课表背景。
- 任务-创建任务，重复类型为每天、每个工作日、每周、每月，截止日期没有设置时，创建的重复型任务，点击该任务为已完成时，之前日期和之后日期的该任务，都被标记为已完成了，请修复。任务-创建任务，重复类型为每天、每个工作日、每周、每月，截止日期有设置时，创建的重复型任务，点击该任务为已完成时，是对的。
- 课表设置，课程库下方，参考 20251229 PRD课表配色.md ，提供配色按钮供用户点击，点击后课程库中内置课程颜色对应修改。2.课表页面，年级 学期 用户名的课表，文字需要适配深色模式。3.课表设置页面，取消 保存编辑按钮，用户设置修改后自动保存。

##  20251224 开发日志

### 设置用户VIP
优化页面显示逻辑，将原有的"用户 ID:00001"信息替换为动态VIP标识系统。具体要求如下：
1. 显示规则：
- 非VIP用户：不显示任何VIP相关信息
- 普通VIP用户：显示"VIP(到期时间:YYYY-MM-DD)"
- 终身VIP用户：显示"终身VIP"徽章

2. 视觉设计要求：
- 设计精美的VIP标识样式，包含适当的图标和文字组合
- 标识需采用矢量图形确保清晰度
- 支持深色/浅色主题自动适配
- 包含适当的动画效果(如悬停状态)

3. 技术实现要求：
- 使用CSS变量实现主题切换
- 确保响应式布局，适配不同屏幕尺寸
- 添加适当的过渡动画效果
- 实现服务器端数据验证，防止前端篡改显示状态

4. 数据交互：
- 从用户信息接口获取VIP状态和到期时间
- 实现本地缓存以减少API调用
- 添加数据更新监听机制

5. 测试要求：
- 覆盖所有VIP状态显示场景
- 测试主题切换功能
- 验证不同屏幕尺寸下的显示效果
- 进行性能测试确保不影响页面加载速度

- 在 我的-关于 页面，新增一个“使用帮助”按钮，点击进入单独的“使用帮助”页面，“使用帮助”页面需包含项目简介、项目特点等相关介绍，需包含下载地址：百度网盘（https://pan.baidu.com/s/16zL_7-ZuYBxcZ3aVXXqWCw?pwd=izyj）、123盘（https://www.123865.com/s/FQLuVv-c7ztv）。
- 在 我的-关于 页面，新增一个“打赏支持”按钮，点击进入单独的“打赏支持”页面，展示微信收款码（https://img.sdgarden.top/blog/wechat/wechatpay.jpg）和支付宝收款码(https://img.sdgarden.top/blog/wechat/alipay.jpg)，感谢打赏用户的话语。

## 20251205 开发日志
- 作业家页面-语文页面-拼音按钮旁边，新增识字按钮，点击后，进入识字页面，

## 20251203 开发日志

- 阅读理解docs\参考库\Browser Compress Image README.md，它的项目库为https://github.com/awesome-compressor/browser-compress-image，对本项目【图片压缩进行优化】。
- 整个项目使用统一的智能压优选算法（我没有 TinyPNG API，不使用它了），选择图片后自动压缩，把最优结果上传到 S3 存储。
- 涉及到图片上传的地方有：任务页面创建任务时上传图片、心愿页面创建心愿时选择心愿图标、作业家页面-小成长页面，创建新纪录时选择图片、我的页面编辑个人信息时上传头像、子账号管理创建子账号时上传头像
- 优化小成长页面。
- 记录卡片菜单左侧增加一个评论图标，点击可对该卡片进行评论 ，评论内容显示在卡片下方，和微信朋友圈评论类似，评论数据需存储到数据库
- 记录卡片菜单左侧评论图标的左侧，增加一个收藏图标，点击后变为黄色的图标，该卡片被收藏，再次点击取消收藏。小成长侧边栏全部记录有个“我的收藏”，点击可以查看所有收藏的记录卡片。
- 图片压缩优化：使用 https://github.com/awesome-compressor/browser-compress-image 库，在前端压缩图片，压缩后再上传到 S3。

## 20251202 开发日志

- 重复类型新增：“单次完成终止型”任务
- 在作业家页面中，新增一个“小成长”按钮，点击进入小成长页面，按`docs\PRD\PRD-20251202小成长.md`要求，实现页面功能，左上角要有一个返回按钮。
- 小成长-新记录页面，需要可以上传音频文件或录制音频（m4a 格式）并上传 S3
- 小成长的图片、音频文件需上传到 S3，文字内容保存到数据库中
- 缩小尺寸，为现在的一半大小即可
- 小成长侧边栏头像，与任务页面左上角头像一致
- 小成长侧边栏标签，与小记录页面记录卡片输入过的标签相关，没有记录的标签不需要
- 手机浏览器，小成长侧边栏宽度，占屏幕宽度 1/2；电脑浏览器，小成长侧边栏宽度，占屏幕宽度 1/4
- 一次发布多张图片时，半天发布不成功，然后显示失败，最后返回看到发布了很多次。出现错误图片压缩力度再大一点，最好可以小于 50kb
- 小成长侧边栏头像，还是没有正常显示，需要和任务页面左上角头像一致
- 点击小成长侧边栏的管理标签，可以对现有标签进行新建、修改、删除（删除标签后，对应记录为无标签状态，不删除对应记录卡片）
- 点击小成长记录卡片菜单，点击删除记录卡片，需要居中显示弹出自定义删除对话框，删除后刷新页面，不再显示已删除的卡片。
- 小成长记录卡片中的图片，需要显示图片 100%，缩放下；创建新纪录页面，添加图片预览时，图片也要 100%显示，缩放下。点击添加照片后，立刻上传到 S3，不需要等点击发布的时候再上传，体验更好些
- 小成长图片需上传到 S3 images/user_id/little_growth 文件夹下

- 按需加载，配合 “懒加载 + 预渲染” 优化，实现首屏加载速度提升。
- 心愿、作业家、我的等所有页面，都不允许放大。

## 20251201 开发日志

- 在作业家页面中，新增一个“听写大师”按钮，点击进入听写大师页面，按`docs\PRD\PRD-20251201听写大师.md`要求，实现页面功能，左上角要有一个返回按钮。
- 听写大师 支持粘贴音频链接进行听写。

## 20251130 开发日志

- 增加拼音大转盘游戏，需求如“docs\PRD\PRD-20251130 拼音大转盘.md”。

## 20251128 开发日志

1. 修复 VIP 设置功能问题：

   - 检查用户管理后台 VIP 设置页面的接口调用逻辑，确保点击普通 VIP 和终身 VIP 选项时正确传递参数
   - 分析"更新失败"提示的原因，修复后端接口处理逻辑或数据库更新问题
   - 添加详细的错误日志记录，包括请求参数、用户 ID 和失败原因
   - 实现前端表单验证，确保提交数据格式正确
   - 测试修复后的功能，确保点击保存后能正确显示"更新成功"提示

2. 优化网页加载性能：

   - 实现页面加载动画组件，在首次进入或浏览器页面恢复时立即显示
   - 优化前端资源加载策略，包括代码分割、懒加载和资源预加载
   - 压缩静态资源（CSS/JS/图片），启用浏览器缓存
   - 添加页面加载进度条，实时反馈加载状态
   - 设置加载超时机制，超时后显示友好提示并提供刷新按钮

3. 添加用户管理按钮功能：

   - 在用户 ID 为 1 的设置页面底部添加"用户管理"按钮
   - 实现权限检查逻辑，仅对用户 ID 为 1 的账号显示该按钮
   - 设计按钮样式，确保与现有界面风格一致
   - 实现按钮点击跳转逻辑，正确导航至用户管理后台
   - 添加按钮权限验证的后端检查，防止未授权访问

4. 针对错误日志 的分析与修复：

   - 详细分析错误日志内容，定位具体错误原因
   - 修复代码中的问题点，确保功能正常运行
   - 添加必要的错误处理和日志记录机制
   - 编写单元测试验证修复效果

5. 任务统计页面分类时间占比图例功能：

   - 在饼图/环形图图例中显示每个分类的具体时长（单位：分钟）
   - 确保图例与图表数据同步更新
   - 添加 hover 效果显示更详细的时间信息
   - 优化图例布局，避免文字重叠

6. 任务统计页面关键指标展示：

   - 总任务数、总时长（分钟）、总金币数采用彩色数字显示
   - 为每个指标设计独特的颜色方案（如：任务数-蓝色，时长-绿色，金币数-金色）
   - 添加适当的图标和单位说明
   - 确保数字动态更新时有平滑的动画效果

7. 用户管理后台系统：
   - 实现权限控制，仅允许用户 ID 为 1 的管理员访问
   - 访问路径：http://localhost:5173/admin 或 https://域名/admin
   - 功能模块：
     - 用户数据总览（注册用户总数、今日登录数）
     - 用户管理功能：禁用用户、删除用户
     - VIP 管理功能：
       - 设置/取消 VIP 状态
       - 设置 VIP 到期时间
       - 标记终身 VIP 选项
     - 用户搜索与筛选功能
   - 界面要求：
     - 采用响应式设计
     - 数据表格展示用户列表
     - 操作按钮明确易用
     - 添加必要的确认对话框和操作日志

- 数据库中记录每个用户最后登录时间，是否为 vip 用户、vip 过期时间。
- 任务设置中，只有 vip 用户才能调整“显示任务备注入口”是否开启，普通用户默认关闭，任务卡片中不显示备注图标按钮，开通 vip 后才能开启（给出提示需开启 VIP）。

## 20251127 开发日志

修改图片上传路径，方便统计不同用户上传文件容量：
（1）编辑个人信息、创建子账号页面，头像上传文件夹由 `images/avatars/{user_id}/` 修改为 `images/{user_id}/avatars//`，其中`{user_id}` 为用户 ID。
（2）创建任务页面和任务备注页面，上传任务图片或任务备注附件时，文件夹由 `images/task_images/{user_id}/` 修改为 `images/{user_id}/task_images/`，其中`{user_id}` 为用户 ID。
(3) 心愿页面，上传心愿图片时，文件夹由 `images/wish/{user_id}/` 修改为 `images/{user_id}/wish/`，其中`{user_id}` 为用户 ID。

- 头像本地上传保存路径：目录从 uploads/images/avatars/{user_id} 改为 uploads/images/{user_id}/avatars
- 任务图片本地上传保存路径：目录从 uploads/images/task_images/{user_id} 改为 uploads/images/{user_id}/task_images
- 任务音频附件本地上传保存路径：目录从 uploads/images/task_images/{user_id}/{task_id} 改为 uploads/images/{user_id}/task_images
- 心愿图片本地上传保存路径：目录从 uploads/images/wish/{user_id} 改为 uploads/images/{user_id}/wish

## 20251126 开发日志

- 任务设置中，新添加的任务分类，需要保存到数据库中，方便用户不同设备登录时同步自己新建的任务分类。
- 下拉刷新，需要从后台数据库更新下数据。
- 移动端，关于界面还是看不见，被底部导航栏遮挡住了。参考心愿页面到解决方案。

## 20251124 开发日志

- 项目前端布置在了 netlify，配置了 VITE_API_BASE 为https://recordgo-server.sdgarden.top/api，现在测试发现问题，创建任务时，选择图片添加，创建的是单个任务，但删除的时候却是重复任务的删除选项，有问题；创建任务添加图片后，图片不能正常上传到配置的S3，本地开发环境是可以上传到S3的，任务备注页面也不能正常上传图片和附件。
- 项目前端布置在了 netlify，配置了 VITE_API_BASE 为https://recordgo-server.sdgarden.top/api，现在测试发现问题，创建心愿的图片不能正常上传到S3并正确显示；编辑个人信息页面头像不能正常上传；子账号管理页面创建子账号头像不能正常上传
- 子账号管理，编辑子账号页面不能正常适配手机浏览器
- 修复我的页面底部安全区填充，避免导航遮挡。
- 优化心愿兑换弹窗标题样式并自适应移动端宽度。
- 修正任务统计页标题栏深色主题并为指标着色。
- 我的页面，移动端，滚动到最低端，还是被底部导航栏遮挡住了最下方的“关于”按钮；
- 心愿页面，点击“兑换”按钮，弹出的兑换页面，标题不好看，页面需要适配移动端。
- 深色主题模式下，任务统计页面标题栏背景色与主题不符，总任务数、总时长（分）、总金币数也需要彩色文字显示。

## 20251123 开发日志

- 任务列表点击左侧复选框，将任务标记为已完成时，任务卡片右侧的“待完成”需要转换为“已完成”，实际完成时间显示为任务计划时间。
- 点击任务卡片番茄钟，倒计时结束后，自动标记任务为已完成，实际完成时间为番茄钟记录时间，并关闭番茄钟页面
- 重复任务（重复类型为每天、每个工作日、每周、每月的任务）删除时有问题，仅删除当前日程、删除当前级未来全部日程、删除所有日程，请好好分析下修改
- netlify 部署了前端，子账号管理设置的子账号头像显示不出来，对应子账号登录后，我的页面头像和任务页面左上角头像都不能正常显示，注意父账号和子账号头像是不一样的
- 子账号使用 token 登录 不要老是掉线退出让重新登录
- 子账号管理 编辑子账号页面 需要自适应显示，适配移动端
- 深色模式下，底部导航栏图标点击后没有变化，无法分辨当前点击的是哪个图标
- 安卓手机，最上端不能跟随主题颜色自动变化，苹果手机已经可以了。

## 20251119 开发日志

- 项目前端使用了 netlify 部署，打开网址https://recordgo.netlify.app/ 会跳转到https://recordgo.netlify.app/tasks，然后刷新页面提示：Page not found
  Looks like you’ve followed a broken link or entered a URL that doesn’t exist on this site.
- 移动端下拉，还是不能正常刷新，请修复。
- 编辑个人信息页面，选择头像，需转换为 webp 格式
- 任务设置页面，新添加的任务分类，需要同步后端数据库
- 创建任务需要本地缓存+云端同步（同步到后端数据库），用户可以在本地创建任务，然后在任意设备上查看和管理任务。
- 创建任务时，重复类型为无时，截止日期需要不可选。
- 创建任务时，重复类型为每天、每个工作日、每周、每月时，创建的任务失败，把所有任务都删除了，
- 创建带图片的任务时，速度比较慢，请优化，并给出温馨提示，

## 20251118 开发日志

- 修改创建任务悬浮图标。
- 修复移动端下拉刷新。
- 修复 Netlify SPA 路由。
- 创建任务，任务图片已经正常上传到了我配置的 S3，地址为https://img.sdgarden.top/images/task_images/1/task_93_1763426231_1763426231059733500.webp，但是任务编辑页面和任务卡片图片按钮点击，不能正常显示图片。
- 继续在心愿列表、领取记录、我的页头像解析处也统一切换到读签名展示（完整兼容 S3 私有桶）
- 创建任务图标放大 0.5 倍，图标底部距离底部导航栏需要有一定间距。创建任务图标可以拖动位置，并记住用户最后一次拖动的位置。
- 登录老是掉线 差不多一天就得重新登录，怎么才能不要频繁掉线，用户退出再失效，否则一直登录
- 我的页面，点击金币设置，修改金币数量后，总金币数需要对应修改，现在不起作用

## 20251114 开发日志

- 编辑个人信息页面头像上传、创建子账号头像上传、创建任务时任务图像上传、任务备注页面图像和音频等附件，创建心愿时心愿图标上传，我都希望上传到 S3 对象存储中，是要在前端实现还是后端实现，S3 设置信息我希望保存到自己的服务器，而不是前端。可以在`docker-compose.yml`对应的`.env`中设置 S3 相关环境变量。
- 更新主题颜色跟随页面动态变化。
- 修复下拉刷新失效问题。

## 20251114 开发日志

- 点击任务页面左上角的头像，切换用户下方需在当前登陆的账号用户名右侧显示一个 对勾符号，告知用户当前页面是哪个账号
- 对于使用 token 登陆的子账号，添加新用户只能同样使用 token 登陆子账号，不能切换登陆父账户，子账号用户点击添加新用户，需要输入的是 token
- 新增功能：点击任务页面左上角头像，可以实现切换用户、添加新用户、退出登陆。点击任务页面左上角头像，切换用户下方可显示多个账户头像及用户名，点击可切换到对应账户、注册新用户修改为“添加新用户”，点击后登陆新用户账号密码，就可以出现在切换用户的下方，点击就可以来回切换不同用户，请具体实现相应的功能。
- 新增功能：点击任务页面右上角统计图标，进入任务统计新页面，有“本周”、“本月”、“本年”、“全部”三个 tab 页面，每个页面可以展示对应“本周”或“本月”的总任务数、已完成、平均完成率、总时长、日均时长、总金币数，图表：每日时间分布（分类维度，柱状图）、分类时间占比（环形占比图）。
- 番茄钟页面，开始、完成按钮合并为一个圆形的大图标，图标内显示文字，第一次点击图标开始计时，再次点击图标暂停，长按图标 2s 完成任务
- 苹果手机 chrome 浏览器，番茄钟设置已启用“保持常亮”，但番茄钟计时时，屏幕常亮不起作用。
- 完成任务时，庆祝效果粒子在任务附近显示，不要从天而降。
- 今天是 11 月 14 日，页面显示“今日任务”，当用户点击 11 月 15 日日期是，“今日任务”显示为“11 月 15 日任务”
- 日时长上方图标颜色加粗，下方数字加粗并且颜色与上方图标颜色一致，其他“任务数”、“日金币”、“完成率”也按同样方法修改。
- 项目支持 PWA，移动端浏览器打开网站，添加到桌面图标，点击图标可以直接打开网站，但是左上方显示了绿色的底纹，与项目主体底纹颜色不一致，请修改一致。
- “创建任务”图标增大 0.5 倍。移动端，创建任务页面，点入输入框，输入框不要自动放大，点击日期选择，不要弹出输入法框。
- 底部导航栏 nav 文字下方再增加文字高度 2 倍的空白。
- 任务页面顶部需要固定。
- 心愿页面顶部左上角显示“兑换心愿”并固定，下一行显示“可用金币”、“领取记录”、“创建心愿”按钮，取消下方的“心愿”。
- 我的页面顶部左上角增加标题“我的”，并固定标题行。

## 20251112 开发日志

- 子账号管理页面标题左侧需要显示返回图标和子账号图标，与编辑个人信息页面类似。
- 子账号不可以编辑个人信息，隐藏“编辑个人信息”按钮，隐藏。
- 子账号管理权限中增加 设置权限：“番茄钟设置”、“任务设置”、“金币设置”、“朗读设置”，无此权限按钮点不开，仅查看权限“任务设置”、“金币设置”不可以用。
- 子账号日金币、总金币、可用金币需要和主账号保持一致。
- 把子账号权限编辑改造成“勾选式”的可视化表单（模块/动作粒度），为令牌展示增加失效策略。
- 点击"我的“页面“子账号管理”，进入子账号管理页面，包含子账号列表、创建子账号。
  子账号列表显示创建的子账号，可以修改子账号（头像、昵称及权限）、删除子账号
  创建子账号时，需要输入子账号的头像、昵称，并选择子账号的权限，点击生成 token，生成一个随机的 token，用于子账号登录。
  子账号勾选了下面哪些权限，登录账号后才有对应的按钮或权限，权限包含：
  - 任务权限：创建任务、编辑任务、删除任务、备注任务、完成任务（点击任务复选框，标记任务为已完成状态）。
  - 心愿权限：创建心愿、编辑心愿、删除心愿、兑换心愿。
  - 账号管理权限：编辑个人信息、子账号管理。
    请对应修改上述权限相关函数，实现子账号管理功能；修改登录页面，用户可直接使用 token 登录子账号，无需输入密码。

## 20251111 开发日志

- 在应用的"我的"页面中，点击"关于"按钮，页面内容需包含以下要素：

1. 软件名称：明确软件图标“frontend\src\assets\favicon\android-chrome-192x192.png”（大小合适）、显示"任务积分助手"
2. 版本号：从指定的 JSON 配置文件中读取当前版本号并显示，确保开发人员可通过修改 JSON 文件更新版本号，用户可直观查看应用的当前版本信息
3. "关注小红书"按钮：点击后应使用系统默认浏览器或应用内浏览器跳转到指定的小红书账号页面
4. "邮件联系"按钮：点击后应触发邮件客户端，自动填写收件人为terlun@foxmail.com，方便用户直接发送邮件联系。
   关于页面的设计应保持与应用整体风格一致，布局合理，各元素间距适当，确保在不同屏幕尺寸下均有良好的显示效果和用户体验。

- 为番茄钟计时器添加分钟分割线和数字刻度，在计时器表盘上添加白色分钟分割线（每分钟一条）和数字刻度（每 5 分钟一个），提升时间显示的精确度和可读性。同时调整系统时间显示的样式使其与标题字号一致。加粗表盘轨道和进度条宽度，调整刻度线长度。**时钟环**与**进度环**加粗。
- 右上系统时间显示，以及表盘按“60 分钟满圈”的刻度与比例。
- 修改番茄钟页面背景色为（ 48, 48, 46），时钟颜色（184,206,232），其他按钮一并调整，使得页面颜色整体协调，为夜间主题，让用户可以更专注。页面需要响应式布局，适应不同页面大小，下方的任务标题、备注、预计时长也修改，融入到上方页面。
- 用户进入番茄钟页面后，点击开始计时，手机或平板设备需保持常亮，可通过调用浏览器的 Wake Lock API 来实现这一功能。
- 番茄钟计时时，锁屏后番茄钟继续计时，不中断。

## 20251110 开发日志

- 我的页面，学科设置修改为“任务分类设置”，可以添加、修改、删除任务分类；可以设置任务分类的颜色。任务页面任务分类的颜色和设置一致；创建任务页面、编辑任务页面中的任务分类下拉选项和任务分类设置中分类一致。
- 分类筛选仅显示当日实际存在的分类，含颜色圆点。
- “任务分类设置”页补充排序交互（拖拽）并联动 setOrder。
- 在“我的”页面，“任务设置”中增加“任务自动排序”选项，默认开启，开启后任务页面中任务清单中，任务分类下方的任务中，已完成任务排到下方；当该任务分类都完成时，将未完任务的任务分类排到上方。
- 学科设置中，已添加到学科，可以拖拽排序，调整顺序后，任务清单中显示的顺序也会改变，与排序后的科目顺序一致。
- “任务”页面今日任务右侧筛选图标的右侧新增一个排序图标，点击有“默认排序”、“时间顺序”、“任务分类”、“完成优先”、“添加时间”5 中排序，点击可以实现对应的对任务排序。
- “我的”页面任务设置中增加开启/关闭任务备注的功能，默认是开启的，点击关闭后，任务清单中任务卡片不显示备注图标、菜单栏也不显示备注按钮。
- 实现下拉页面刷新数据。
- 有备注信息的任务，朗读小喇叭图标左侧新增一个备注图标，点击可以查看、回复备注，每条备注有个小喇叭，点击可以播放该备注内容。
- 任务卡片番茄钟图标左侧新增一个小喇叭朗读任务的图标，点击可以播放任务内容，播放内容为："{任务分类}，{任务标题},备注：{任务描述}"，例如：语文，认 2 个汉字，备注：洪恩识字认识 2 个新汉字。小喇叭声音播放使用 SpeechSynthesis，用户可以在“我的”页面朗读设置中进行相关设置，例如：选择朗读语音(中文语音、英文语音)、调整朗读语速、音调等。
- 任务页面，任务卡片中，任务标题需要和任务描述左对齐，并靠近任务复选框一些，现在距离有些远。
- 当新建的任务重复类型为每天、每个工作日、每周、每月时，点击其他日期，可以显示出重复的任务，但是日期下方的紫色小点和当日任务个数没有显示。
- 当新建的任务重复类型为每天、每个工作日、每周、每月时，点击任务菜单，删除任务时，删除对话框需包含“仅删除当前日程”、“删除当前及未来全部日程”、“删除所有日程”；当任务重复类型为无时，删除任务时，删除对话框需仅包含“取消”和“确定”。

## 20251109 开发日志

- 心愿页面点击创建心愿，进入独立的创建心愿页面，页面左上角有个返回图标，点击返回。页面需响应式布局，移动端单列显示，桌面端根据页面调整中为多列显示，提升不同设备上的显示效果，领取鸡柳页面也是同样的修改。
- 点击兑换按钮，优化弹出的对话框样式，标题栏需要有背景色、界面圆角，使用 tailwend css 美化，更漂亮些。
- 任务页面点击添加任务，进入独立的创建任务页面，页面左上角有个返回图标，点击返回。页面需响应式布局，移动端单列显示，桌面端根据页面调整中为多列显示，，提升不同设备上的显示效果，编辑任务、番茄钟页面也是同样的修改。

## 20251105 开发日志

- 1、创建任务页面中新增 任务图片，用户可以上传该任务对应的 1 张或多张图片到 backend\storage\uploads\images\task_images，上传的图片显示缩略图、可以删除，可以点击查看
  2、分类和计划时长放到同一行
  3、任务页面中新增 重复类型，可以选择：无、每天、每个工作日、每周、每月；当选择每周时，下方可以再次选择周一、周二。。。周日，可多选，选择重复的任务对应重复日期需要创建对应任务。重复类型默认 是 无。
  4、创建任务页面标题前方增加一个图标，页面中每个字段左侧都添加一个图标，如该字段是必填，其右侧显示一个红色的。

## 20251104 开发日志

- 前端安装依赖：cd g:\Code\RecordGo\frontend ; npm install
- 前端启动：cd g:\Code\RecordGo\frontend ; pnpm dev 或 npm run dev
- 后端依赖安装： cd g:\Code\RecordGo\backend ; go mod tidy
- 后端启动：
- 后端启动调试模式：
- 后端启动: cd g:\Code\RecordGo\backend
  本地存储后端启动：

```powershell
$env:SECRET_KEY = "dev-secret"; $env:DB_PATH = "storage/database/recordgo.db"; $env:STORAGE_ROOT = "storage"; $env:PORT = "8082"; $env:GIN_MODE = "debug"; go mod tidy; go run ./cmd/server
```

- go run main.go
- 测试账号：用户名：testuser，密码：Testuser123
- 测试子账号：用户名：subtestuser，密码：Subtestuser123

# 自定义 TTS 功能视觉与交互走查报告

## 1. 功能入口与布局
- **入口**: 用户点击底部导航栏“我的” -> “朗读设置”。
- **布局**: 页面顶部显示“朗读设置”标题。
- **开关**: 顶部保留全局“启用朗读”开关，关闭时下方设置项禁用或隐藏。
- **Tabs**: 开启朗读后，显示双 Tab 布局：
  - **Tab 1: 系统默认**: 保留原有界面（语音选择、语速、音调滑块、测试按钮）。
  - **Tab 2: 自定义接口**: 新增界面。

## 2. 自定义接口 Tab 交互
- **空状态**: 初次进入显示“暂无配置，请点击右上角新增”的虚线框提示。
- **列表显示**:
  - 每个配置卡片显示：单选框（选中状态）、配置名称（粗体）、API URL（灰色小字）、Voice/Speed 参数概览。
  - 选中项高亮：背景色变为淡蓝（`bg-blue-50`），边框变色（`border-primary`）。
  - 操作按钮：右侧显示编辑（笔形图标）和删除（红色垃圾桶图标）按钮。
- **新增/编辑弹窗**:
  - 点击“新增配置”或编辑按钮弹出 Dialog。
  - 表单包含：配置名称、接口地址、API Key、音色 ID、语速、音调、请求方式（GET/POST）。
  - **测试连接**:
    - 点击“测试连接”按钮，按钮显示 Loading 状态。
    - 成功：显示绿色对勾与“测试成功”提示，自动播放一段测试音频（“你好，我是汉字小英雄”）。
    - 失败：显示红色警告图标与错误详情。
  - **保存**: 校验名称和 URL 必填，保存后列表自动刷新并选中该配置。

## 3. 全局生效验证
- **任务详情页**: 点击任务卡片上的喇叭图标，若当前选中了自定义 TTS 配置，系统将调用第三方接口生成音频并播放。
- **拼音大转盘**: 转动结束后点击右上角朗读图标，同样遵循全局 TTS 设置。
- **听写大师**: 听写过程中，若词汇为文本（非 URL），且全局开启了自定义 TTS，将使用自定义语音朗读单词，听写体验更佳。

## 4. 视觉规范一致性
- **颜色**: 使用 Element Plus 默认主色（Primary Blue）与 Tailwind 灰色系（`text-gray-600` 等），适配深色模式（`dark:bg-gray-800`）。
- **间距**: 统一使用 `space-y-4` / `p-4` 等标准间距。
- **字体**: 标题 `font-semibold`，辅助信息 `text-xs`。

## 5. 兼容性测试结论
- **并行运行**: 切换 Tab 并保存后，立即生效。切回“系统默认”Tab，立即恢复浏览器原生语音。
- **降级处理**: 若自定义接口调用失败（如 Key 过期），`speak` 函数捕获异常，不会导致页面崩溃（UI 层面静默失败或提示错误）。
- **异步适配**: 所有调用端（任务、拼音、听写）均已适配异步 `await speak(...)` 调用，确保播放逻辑正确。

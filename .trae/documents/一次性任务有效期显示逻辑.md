## 目标
- 支持“**一次性任务 + 有效期**”：在有效期内（开始～截止）若未完成，每天都会在当天待办里出现；一旦完成后，在有效期内也不再出现。

## 现状结论（基于代码）
- 当前“重复类型=无/none”的任务只会在开始日期那天出现；并且创建页在 repeat_type=none 时禁用截止日期选择。
- 因此目前无法创建你描述的“有效期内每天出现的一次性任务”。

## 方案设计（不新增重复类型，复用现有字段）
- 复用现有 `start_date` + `end_date` + `repeat_type=none` + `status`：
  - **规则**：当 `repeat_type=none` 且 `end_date` 有值时，把它视为“有效期一次性任务”。
  - **展示**：当选中日期 ∈ [start_date, end_date] 且任务未完成（status!=2）时，任务出现在当天列表；否则不出现。
  - **完成后**：因为一次性任务使用全局 `status`，完成一次就不会再满足“未完成”条件，从而在有效期内也不再出现。

## 前端改动
1) 创建任务页
- 允许在 `repeat_type=none` 时选择截止日期（改成“有效期截止”概念）。
- 增加简单校验：截止日期不得早于开始日期。
- AI 创建里的每条任务编辑表单同样允许设置截止日期（repeat_type=none 也可用）。

2) 编辑任务页
- 同步支持一次性任务的截止日期编辑（有效期）。
- 同步做截止≥开始校验。

3) 任务列表页（当天过滤逻辑）
- 调整日期过滤：
  - `repeat_type=none` 且 `end_date` 存在 → 选中日期在区间内且未完成则显示。
  - 否则维持原逻辑（无截止：只在开始日显示；有重复：按重复日历生成显示）。

## 后端改动（可选但推荐）
- 在 Create/Update 时加后端校验：`end_date` 若存在则必须 >= `start_date`，避免前端绕过导致脏数据。

## 验证方式
- 新建一次性任务：开始=今天、截止=+3天、未完成 → 连续 4 天都能看到。
- 在第 2 天完成 → 从第 3/4 天列表中不再出现。
- 截止日期早于开始日期 → 前端提示 + 后端拒绝。 

如果你确认，我就按以上方案开始修改代码并跑 go test 与前端 typecheck。